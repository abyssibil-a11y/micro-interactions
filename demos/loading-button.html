<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Loading Button</title>
    <link rel="stylesheet" href="../loading-button/loading-button.css" />
    <script type="module">
        import LoadingButton from '../loading-button/loading-button.js';
        import Toast from '../loading-button/toast.js';
        import { sleep, maybeFail } from '../utils/asyncHelpers.js';

        const showToast = Toast({ duration: 2500 });

        async function action(buttonEl, event) {
            await sleep(900);
            maybeFail(0.25);

            return { ok: true };
        }

        LoadingButton('.loading-button', {
            action,
            loadingText: 'Loading...',
            toast: showToast,
            onSuccess: () => showToast('Data refreshed!', { variant: 'success' }),
            onError: () => showToast('Failed to refresh. Please try again.', { variant: 'error' }),
        });

    </script>
</head>

<body>

    <button class="loading-button">
        <span class="icon">â†»</span>
        <span class="text">Refresh</span>
    </button>

</body>

</html>